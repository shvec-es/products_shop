import{i as y,a as l}from"./vendor-4yCzdkXl.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function e(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(r){if(r.ep)return;r.ep=!0;const c=e(r);fetch(r.href,c)}})();const W="https://dummyjson.com",g={ALL_PRODUCTS:"/products",PRODUCT_BY_ID:"/products/",SEARCH_PRODUCTS:"/products/search",CATEGORIES:"/products/category-list",PRODUCTS_BY_CATEGORY:"/products/category/"},C=12,d={CART:"cart",WISHLIST:"wishlist",THEME:"theme"},s={categoriesList:document.querySelector(".categories"),productsList:document.querySelector(".products"),loadMoreBtn:document.querySelector(".load-more-btn"),divNotFound:document.querySelector(".not-found"),divModal:document.querySelector(".modal"),modalCloseBtn:document.querySelector(".modal__close-btn"),divModalProduct:document.querySelector(".modal-product"),searchForm:document.querySelector(".search-form"),searchClearForm:document.querySelector(".search-form__btn-clear"),addToWishBtn:document.querySelector(".modal-product__btn--wishlist"),addToCartBtn:document.querySelector(".modal-product__btn--cart"),cartCount:document.querySelector("[data-cart-count]"),wishCount:document.querySelector("[data-wishlist-count]"),cartItemsCount:document.querySelector("[data-count]"),cartItemsPrice:document.querySelector("[data-price]"),cartBuyProducts:document.querySelector(".cart-summary__btn")},x=t=>{const o=t.map(e=>`<li class="categories__item">
   <button class="categories__btn" type="button">${e}</button>
 </li>`).join("");s.categoriesList.innerHTML=o,I()},u=t=>{const o=t.map(({id:e,thumbnail:a,title:r,brand:c,category:i,price:v})=>`<li class="products__item" data-id="${e}">
    <img class="products__image" src="${a}" alt="${r}"/>
    <p class="products__title">${r}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:</span> ${c}</p>
    <p class="products__category">Category: ${i}</p>
    <p class="products__price">Price: ${v}$</p>
 </li>`).join("");s.productsList.insertAdjacentHTML("beforeend",o)},m=()=>{s.productsList.innerHTML=""},k=({thumbnail:t,title:o,tags:e,description:a,shippingInformation:r,returnPolicy:c,price:i})=>{const v=e.map(F=>`<li class="modal-product__tag">${F}</li>`).join(""),q=`<img class="modal-product__img" src="${t}" alt="${o}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${o}</p>
        <ul class="modal-product__tags">${v}</ul>
        <p class="modal-product__description">${a}</p>
        <p class="modal-product__shipping-information">Shipping:${r} </p>
        <p class="modal-product__return-policy">Return Policy: ${c}</p>
        <p class="modal-product__price">Price: ${i}$</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>`;s.divModalProduct.innerHTML=q},T=()=>{s.loadMoreBtn.classList.remove("is-hidden")},L=()=>{s.loadMoreBtn.classList.add("is-hidden")},S=t=>{s.cartItemsCount.textContent=t.length;const o=t.reduce((e,a)=>e+a.price,0);s.cartItemsPrice.textContent=`$${o.toFixed(2)}`},h=(t,o)=>{const e={message:t,position:"topRight"};switch(o){case"success":y.success(e);break;case"info":y.info(e);break;case"warning":y.warning(e);break;case"error":y.error(e);break;default:y.error({message:"Invalid type of toast",position:"topRight",timeout:5e3})}},b=()=>{const t=document.querySelector(".categories__btn--active");t&&t.classList.remove("categories__btn--active")},I=()=>{const t=s.categoriesList.querySelector(".categories__btn");t&&t.classList.add("categories__btn--active")},B=(t,o)=>{Math.ceil(t/C)===o?(L(),h("No more products to load","info")):T()},w=t=>{t.code==="Escape"&&$()},R=({target:t})=>{t===s.divModal&&$()},D=()=>{s.divModal.classList.add("modal--is-open"),document.body.style.overflow="hidden",window.addEventListener("keydown",w),s.divModal.addEventListener("click",R)},$=()=>{s.divModal.classList.remove("modal--is-open"),document.body.style.overflow="auto",window.removeEventListener("keydown",w),s.divModal.removeEventListener("click",R)};l.defaults.baseURL=W;const H=async()=>{const{data:t}=await l(g.CATEGORIES);return t},P=async(t=1)=>{const o=(t-1)*C,{data:e}=await l(`${g.ALL_PRODUCTS}?limit=${C}&skip=${o}`);return e},U=async t=>{const{data:o}=await l(`${g.PRODUCTS_BY_CATEGORY}${t}`);return o},A=async t=>{const{data:o}=await l(`${g.PRODUCT_BY_ID}${t}`);return o},Y=async t=>{const{data:o}=await l(`${g.SEARCH_PRODUCTS}?q=${t}`);return o},M=async t=>Promise.all(t.map(o=>A(o))),j=t=>{try{const o=localStorage.getItem(t);return o?JSON.parse(o):null}catch(o){return console.error(`Error getting data from localStorage: ${o.message}`),null}},E=(t,o)=>{try{localStorage.setItem(t,JSON.stringify(o))}catch(e){console.error(`Error saving data to localStorage: ${e.message}`)}},G=t=>{localStorage.removeItem(t)},p=t=>j(t)||[],_=(t,o)=>p(t).includes(o),O=(t,o)=>{const e=p(t);e.push(o),E(t,e)},N=(t,o)=>{const a=p(t).filter(r=>r!==o);E(t,a)};let f=1,n=null;const J=async()=>{try{const t=await H();x(["All",...t])}catch(t){console.log(t)}},K=async t=>{m();try{const{products:o,total:e}=await P(t);u(o),B(e,f)}catch(o){console.log(o)}},z=async({target:t})=>{if(t.nodeName==="BUTTON"){m(),b(),L();try{let o=null;if(t.textContent.toLowerCase()==="all"?(o=(await P()).products,T()):o=(await U(t.textContent)).products,o.length===0){s.divNotFound.classList.add("not-found--visible");return}s.divNotFound.classList.remove("not-found--visible"),t.classList.add("categories__btn--active"),u(o)}catch(o){console.log(o)}}},Q=async({target:t})=>{const o=t.closest(".products__item");if(o){n=o.dataset.id;try{const e=await A(n),a=_(d.CART,n),r=_(d.WISHLIST,n);s.addToCartBtn.textContent=a?"Remove from cart":"Add to Cart",s.addToWishBtn.textContent=r?"Remove from Wishlist":"Add to Wishlist",k(e),D()}catch(e){console.log(e)}}},X=async t=>{t.preventDefault();const o=t.target.elements.searchValue.value.trim();if(!o){h("You need to enter something for search","info");return}m(),L();try{const{products:e}=await Y(o);if(e.length===0){s.divNotFound.classList.add("not-found--visible");return}u(e)}catch(e){console.log(e)}},Z=async()=>{s.searchForm.reset(),K(),b(),I()},tt=async()=>{f++;try{const{products:t,total:o}=await P(f);u(t),B(o,f)}catch(t){console.log(t)}},ot=()=>{if(!n)return;_(d.CART,n)?(s.addToCartBtn.textContent="Add to Cart",N(d.CART,n),s.cartCount.textContent--):(s.addToCartBtn.textContent="Remove from cart",O(d.CART,n),s.cartCount.textContent++)},et=()=>{if(!n)return;_(d.WISHLIST,n)?(s.addToWishBtn.textContent="Add to Wishlist",N(d.WISHLIST,n),s.wishCount.textContent--):(s.addToWishBtn.textContent="Remove from Wishlist",O(d.WISHLIST,n),s.wishCount.textContent++)},st=async()=>{const t=p(d.WISHLIST);if(m(),t.length===0){s.divNotFound.classList.add("not-found--visible");return}s.divNotFound.classList.remove("not-found--visible");try{const o=await M(t);u(o)}catch(o){console.log(o)}},rt=async()=>{const t=p(d.CART);if(m(),t.length===0){s.divNotFound.classList.add("not-found--visible"),S([]);return}s.divNotFound.classList.remove("not-found--visible");try{const o=await M(t);S(o),u(o)}catch(o){console.log(o)}},ct=()=>{if(p(d.CART).length===0){h("You have no products to buy","warning");return}h("Thank you for your order!","success"),S([]),s.cartCount.textContent=0,G(d.CART),m(),s.divNotFound.classList.add("not-found--visible")};export{d as L,st as a,Q as b,$ as c,ot as d,et as e,J as f,p as g,K as h,z as i,X as j,Z as k,tt as l,rt as m,ct as n,s as r};
//# sourceMappingURL=handlers-DrDR-GwD.js.map
