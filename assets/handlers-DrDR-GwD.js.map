{"version":3,"file":"handlers-DrDR-GwD.js","sources":["../../src/js/constants.js","../../src/js/refs.js","../../src/js/render-function.js","../../src/js/helpers.js","../../src/js/modal.js","../../src/js/products-api.js","../../src/js/storage.js","../../src/js/handlers.js"],"sourcesContent":["// API ендпоінти:\n// https://dummyjson.com/docs/products - документація бекенду, розділ продукти\n// https://dummyjson.com/products?limit=10&skip=10 - отримати всі продукти з пагінацією\n// https://dummyjson.com/products/1 - отримати один продукт по ID\n// https://dummyjson.com/products/search?q=nail - пошук продукту по ключовому слову\n// https://dummyjson.com/products/category-list - отримати список категорій продуктів\n// https://dummyjson.com/products/category/smartphones - отримати продукти по категорії\n\n// Виписуємо сюди константи - урл, ендпоінти, ключі локал сторадж\nexport const BASE_URL = 'https://dummyjson.com';\n\nexport const ENDPOINTS = {\n  ALL_PRODUCTS: '/products',\n  PRODUCT_BY_ID: '/products/',\n  SEARCH_PRODUCTS: '/products/search',\n  CATEGORIES: '/products/category-list',\n  PRODUCTS_BY_CATEGORY: '/products/category/',\n};\n\nexport const ITEMS_PER_PAGE = 12;\n\nexport const LS_KEYS = {\n  CART: 'cart',\n  WISHLIST: 'wishlist',\n  THEME: 'theme',\n};\n","export const refs = {\n  categoriesList: document.querySelector('.categories'),\n  productsList: document.querySelector('.products'),\n  loadMoreBtn: document.querySelector('.load-more-btn'),\n  divNotFound: document.querySelector('.not-found'),\n  divModal: document.querySelector('.modal'),\n  modalCloseBtn: document.querySelector('.modal__close-btn'),\n  divModalProduct: document.querySelector('.modal-product'),\n  searchForm: document.querySelector('.search-form'),\n  searchClearForm: document.querySelector('.search-form__btn-clear'),\n  addToWishBtn: document.querySelector('.modal-product__btn--wishlist'),\n  addToCartBtn: document.querySelector('.modal-product__btn--cart'),\n  cartCount: document.querySelector('[data-cart-count]'),\n  wishCount: document.querySelector('[data-wishlist-count]'),\n  cartItemsCount: document.querySelector('[data-count]'),\n  cartItemsPrice: document.querySelector('[data-price]'),\n  cartBuyProducts: document.querySelector('.cart-summary__btn'),\n};\n","import { activeFirstBtnInCategories } from './helpers';\nimport { refs } from './refs';\n\n// тут всі функції рендеру\n// 1\nexport const renderCategories = data => {\n  const markup = data\n    .map(\n      el => `<li class=\"categories__item\">\n   <button class=\"categories__btn\" type=\"button\">${el}</button>\n </li>`\n    )\n    .join('');\n\n  refs.categoriesList.innerHTML = markup;\n\n  //   додаємо активний клас на першу кнопку\n  activeFirstBtnInCategories();\n};\n\n// 2, 3, 5\nexport const renderProducts = data => {\n  const markup = data\n    .map(\n      ({\n        id,\n        thumbnail,\n        title,\n        brand,\n        category,\n        price,\n      }) => `<li class=\"products__item\" data-id=\"${id}\">\n    <img class=\"products__image\" src=\"${thumbnail}\" alt=\"${title}\"/>\n    <p class=\"products__title\">${title}</p>\n    <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand:</span> ${brand}</p>\n    <p class=\"products__category\">Category: ${category}</p>\n    <p class=\"products__price\">Price: ${price}$</p>\n </li>`\n    )\n    .join('');\n\n  refs.productsList.insertAdjacentHTML('beforeend', markup);\n};\n\n// (3) робимо функцію для очищення списку продуктів\nexport const clearProductsList = () => {\n  refs.productsList.innerHTML = '';\n};\n\n// 4\nexport const renderProductInModal = ({\n  thumbnail,\n  title,\n  tags,\n  description,\n  shippingInformation,\n  returnPolicy,\n  price,\n}) => {\n  //  окремо мапаємо тегі щоб сторити динамічно список\n  const tagsInMarkup = tags\n    .map(tag => `<li class=\"modal-product__tag\">${tag}</li>`)\n    .join('');\n\n  const markup = `<img class=\"modal-product__img\" src=\"${thumbnail}\" alt=\"${title}\" />\n      <div class=\"modal-product__content\">\n        <p class=\"modal-product__title\">${title}</p>\n        <ul class=\"modal-product__tags\">${tagsInMarkup}</ul>\n        <p class=\"modal-product__description\">${description}</p>\n        <p class=\"modal-product__shipping-information\">Shipping:${shippingInformation} </p>\n        <p class=\"modal-product__return-policy\">Return Policy: ${returnPolicy}</p>\n        <p class=\"modal-product__price\">Price: ${price}$</p>\n        <button class=\"modal-product__buy-btn\" type=\"button\">Buy</button>\n      </div>`;\n  refs.divModalProduct.innerHTML = markup;\n};\n\n// пагінація\nexport const showLoadMore = () => {\n  refs.loadMoreBtn.classList.remove('is-hidden');\n};\n\nexport const hideLoadMore = () => {\n  refs.loadMoreBtn.classList.add('is-hidden');\n};\n\n// функція для сторінки Cart -> Summary\nexport const countSummary = products => {\n  refs.cartItemsCount.textContent = products.length;\n  const totalPrice = products.reduce(\n    (total, product) => total + product.price,\n    0\n  );\n  refs.cartItemsPrice.textContent = `$${totalPrice.toFixed(2)}`;\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { ITEMS_PER_PAGE } from './constants';\nimport { refs } from './refs';\nimport { hideLoadMore, showLoadMore } from './render-function';\n\n// функція для сповіщень ізітоаст\nexport const showToastMessage = (message, type) => {\n  const options = {\n    message,\n    position: 'topRight',\n  };\n\n  switch (type) {\n    case 'success':\n      iziToast.success(options);\n      break;\n\n    case 'info':\n      iziToast.info(options);\n      break;\n\n    case 'warning':\n      iziToast.warning(options);\n      break;\n\n    case 'error':\n      iziToast.error(options);\n      break;\n\n    default:\n      iziToast.error({\n        message: 'Invalid type of toast',\n        position: 'topRight',\n        timeout: 5000,\n      });\n  }\n};\n\n// функція для видалення класу активної кнопки категорій\nexport const removeActiveBtn = () => {\n  // 1 варінат - перебираємо всі кнопки і видаляємо активний клас\n  // + масштабовано, - даремно перебираємо кнопки оскільки активна тільки 1\n  //   const allBtns = document.querySelectorAll('.categories__btn');\n  //   allBtns.forEach(btn => btn.classList.remove('categories__btn--active'));\n\n  // 2 варіант - шукаємо тільки активну кнопку і видаляємо з неї клас\n  // + швидно, бо кнопка завжди одна, - не можна масштабувати\n  const activeBtn = document.querySelector('.categories__btn--active');\n  if (activeBtn) {\n    activeBtn.classList.remove('categories__btn--active');\n  }\n};\n\n// виносимо функцію активації першої кнопки категорій окремо, бо вона потрібна не один раз\nexport const activeFirstBtnInCategories = () => {\n  const firstBtn = refs.categoriesList.querySelector('.categories__btn');\n  if (firstBtn) {\n    firstBtn.classList.add('categories__btn--active');\n  }\n};\n\n// функція для перевірки чи потрібно показувати кнопку Лоад мо\nexport const checkVisibilityLoadMoreButton = (total, currentPage) => {\n  if (Math.ceil(total / ITEMS_PER_PAGE) === currentPage) {\n    hideLoadMore();\n    showToastMessage('No more products to load', 'info');\n  } else {\n    showLoadMore();\n  }\n};\n","import { refs } from './refs';\n\n// функції для закриття модалки при кліку на Escape чи на бекдроп\nconst onEscKeyPress = event => {\n  if (event.code === 'Escape') {\n    closeModal();\n  }\n};\n\nconst onBackdropClick = ({ target }) => {\n  if (target === refs.divModal) {\n    closeModal();\n  }\n};\n\nexport const openModal = () => {\n  refs.divModal.classList.add('modal--is-open');\n  //   body-scroll-lock\n  document.body.style.overflow = 'hidden';\n  //   додаємо слухачів при відкритті модалки\n  window.addEventListener('keydown', onEscKeyPress);\n  refs.divModal.addEventListener('click', onBackdropClick);\n};\n\nexport const closeModal = () => {\n  refs.divModal.classList.remove('modal--is-open');\n  //   body-scroll-unlock\n  document.body.style.overflow = 'auto';\n  //   видаляємо слухачів при закритті модалки, щоб вона не накопичувались в памʼяті\n  window.removeEventListener('keydown', onEscKeyPress);\n  refs.divModal.removeEventListener('click', onBackdropClick);\n};\n","// тут пишемо функції запитів на бекенд або один клас\n\n// API ендпоінти:\n// https://dummyjson.com/docs/products - документація бекенду, розділ продукти\n// https://dummyjson.com/products?limit=10&skip=10 - отримати всі продукти з пагінацією\n// https://dummyjson.com/products/1 - отримати один продукт по ID\n// https://dummyjson.com/products/search?q=nail - пошук продукту по ключовому слову\n// https://dummyjson.com/products/category-list - отримати список категорій продуктів\n// https://dummyjson.com/products/category/smartphones - отримати продукти по категорії\n\nimport axios from 'axios';\nimport { BASE_URL, ENDPOINTS, ITEMS_PER_PAGE } from './constants';\n\n// додаємо base url через дефолтні налаштування аксіос, щоб не додавати в кожний запит окремо\naxios.defaults.baseURL = BASE_URL;\n\n// 1. запит за всіма категоріями\nexport const fetchAllCategories = async () => {\n  const { data } = await axios(ENDPOINTS.CATEGORIES);\n  return data;\n};\n\n// 2. запит за всіма продуктами з пагінацією\n// для пагінації функція приймає параметр page, по дефолту значення 1 (1 сторінка)\nexport const fetchAllProducts = async (page = 1) => {\n  // пагінація реалізується через skip (кількість елементів, що треба пропустити)\n  // тому необхідно розрахувати\n  const skip = (page - 1) * ITEMS_PER_PAGE;\n  const { data } = await axios(\n    `${ENDPOINTS.ALL_PRODUCTS}?limit=${ITEMS_PER_PAGE}&skip=${skip}`\n  );\n  return data;\n};\n\n// 3. запит за продуктами певної категорії\nexport const fetchProductsByCategory = async category => {\n  const { data } = await axios(`${ENDPOINTS.PRODUCTS_BY_CATEGORY}${category}`);\n  return data;\n};\n\n// 4. запит за продуктом по айді\nexport const fetchProductById = async id => {\n  const { data } = await axios(`${ENDPOINTS.PRODUCT_BY_ID}${id}`);\n  return data;\n};\n\n// 5. запит по пошуковому слову\nexport const fetchProductsByName = async name => {\n  const { data } = await axios(`${ENDPOINTS.SEARCH_PRODUCTS}?q=${name}`);\n  return data;\n};\n\n// запит за всіма продуктами по айдішкам для сторінки Wishlist\nexport const fetchProductsByIds = async ids => {\n  return Promise.all(ids.map(id => fetchProductById(id)));\n};\n","export const getFromStorage = key => {\n  try {\n    const data = localStorage.getItem(key);\n    return data ? JSON.parse(data) : null;\n  } catch (error) {\n    console.error(`Error getting data from localStorage: ${error.message}`);\n    return null;\n  }\n};\n\nexport const saveToStorage = (key, data) => {\n  try {\n    localStorage.setItem(key, JSON.stringify(data));\n  } catch (error) {\n    console.error(`Error saving data to localStorage: ${error.message}`);\n  }\n};\n\nexport const removeFromStorage = key => {\n  localStorage.removeItem(key);\n};\n\n// забираємо всі продукти з ЛС по ключу\nexport const getSavedProducts = key => {\n  return getFromStorage(key) || [];\n};\n\n// функція для перевірки чи є продукт по айді в ЛС\nexport const isInLS = (key, id) => {\n  const savedProducts = getSavedProducts(key);\n  return savedProducts.includes(id);\n};\n\n// функція для додавання продукта в ЛС\nexport const addToLS = (key, id) => {\n  const savedProducts = getSavedProducts(key);\n  savedProducts.push(id);\n  saveToStorage(key, savedProducts);\n};\n\n// функція для видалення продукта з ЛС\nexport const removeFromLS = (key, id) => {\n  const savedProducts = getSavedProducts(key);\n  const updatedProductes = savedProducts.filter(prodId => prodId !== id);\n  saveToStorage(key, updatedProductes);\n};\n","import { LS_KEYS } from './constants';\nimport {\n  activeFirstBtnInCategories,\n  checkVisibilityLoadMoreButton,\n  removeActiveBtn,\n  showToastMessage,\n} from './helpers';\nimport { openModal } from './modal';\nimport {\n  fetchAllCategories,\n  fetchAllProducts,\n  fetchProductById,\n  fetchProductsByName,\n  fetchProductsByCategory,\n  fetchProductsByIds,\n} from './products-api';\nimport { refs } from './refs';\nimport {\n  clearProductsList,\n  countSummary,\n  hideLoadMore,\n  renderCategories,\n  renderProductInModal,\n  renderProducts,\n  showLoadMore,\n} from './render-function';\nimport {\n  addToLS,\n  getFromStorage,\n  getSavedProducts,\n  isInLS,\n  removeFromLS,\n  removeFromStorage,\n  saveToStorage,\n} from './storage';\n\nlet currentPage = 1;\nlet productId = null;\n\n// 1. робимо запит за всіма категоріями\nexport const getCategories = async () => {\n  try {\n    const categories = await fetchAllCategories();\n    renderCategories(['All', ...categories]);\n  } catch (error) {\n    console.log(error);\n  }\n};\n\n// 2. робимо запит за продуктами з пагінацією\nexport const getProducts = async page => {\n  clearProductsList();\n  try {\n    const { products, total } = await fetchAllProducts(page);\n    renderProducts(products);\n    checkVisibilityLoadMoreButton(total, currentPage);\n  } catch (error) {\n    console.log(error);\n  }\n};\n\n// 3. при кліку на список категорій перевіряємо клік на кнопці,\n// забираємо текст кнопки і робимо запит за продуктами певної категорії\nexport const getProductsByCategory = async ({ target }) => {\n  if (target.nodeName !== 'BUTTON') return;\n  clearProductsList();\n  removeActiveBtn();\n  hideLoadMore();\n\n  try {\n    let products = null;\n    if (target.textContent.toLowerCase() === 'all') {\n      const data = await fetchAllProducts();\n      products = data.products;\n      showLoadMore();\n    } else {\n      const data = await fetchProductsByCategory(target.textContent);\n      products = data.products;\n    }\n\n    // якщо продуктів не знайдено, показуємо нот-фаунд і очищуємо список продуктів\n    if (products.length === 0) {\n      refs.divNotFound.classList.add('not-found--visible');\n      return;\n    }\n    refs.divNotFound.classList.remove('not-found--visible');\n    target.classList.add('categories__btn--active');\n    renderProducts(products);\n  } catch (error) {\n    console.log(error);\n  }\n};\n\n// 4. Реалізуємо делегування на список продуктів для запиту за детальною інфо по продукту (по ID)\nexport const getProductByID = async ({ target }) => {\n  // оскільки при кліку на картку можна попасти на будь-який вкладений елемента,\n  // а нам треба на лі, щоб взяти айді, використовуємо closest\n  const li = target.closest('.products__item');\n  if (!li) return;\n\n  productId = li.dataset.id;\n  try {\n    const data = await fetchProductById(productId);\n    // треба перевірити що написати на кнопках перш ніж відкрити модалку\n    const isInCart = isInLS(LS_KEYS.CART, productId);\n    const isInWishlist = isInLS(LS_KEYS.WISHLIST, productId);\n    refs.addToCartBtn.textContent = isInCart\n      ? 'Remove from cart'\n      : 'Add to Cart';\n    refs.addToWishBtn.textContent = isInWishlist\n      ? 'Remove from Wishlist'\n      : 'Add to Wishlist';\n    renderProductInModal(data);\n    openModal();\n  } catch (error) {\n    console.log(error);\n  }\n};\n\n// 5. Реалізуємо пошук по назві продукту в формі\nexport const getProductsBySearchName = async event => {\n  event.preventDefault();\n\n  const inputValue = event.target.elements.searchValue.value.trim();\n\n  if (!inputValue) {\n    showToastMessage('You need to enter something for search', 'info');\n    return;\n  }\n  clearProductsList();\n  hideLoadMore();\n\n  try {\n    const { products } = await fetchProductsByName(inputValue);\n\n    // якщо продуктів не знайдено, показуємо нот-фаунд і очищуємо список продуктів\n    if (products.length === 0) {\n      refs.divNotFound.classList.add('not-found--visible');\n      return;\n    }\n    renderProducts(products);\n    // робимо копію, щоб завантажити перші 12 продуктів\n    // const productsFirstPage = products.slice(0, 12);\n    // renderProducts(productsFirstPage);\n  } catch (error) {\n    console.log(error);\n  }\n};\n\n// 5.1\nexport const clearProductsBySearchForm = async () => {\n  refs.searchForm.reset();\n  getProducts();\n  removeActiveBtn();\n  activeFirstBtnInCategories();\n};\n\n// пагінація\nexport const getProductsByLoadMore = async () => {\n  currentPage++;\n  try {\n    const { products, total } = await fetchAllProducts(currentPage);\n    renderProducts(products);\n    checkVisibilityLoadMoreButton(total, currentPage);\n  } catch (error) {\n    console.log(error);\n  }\n};\n\n// 6.1 Реалізуємо додавання/видалення товару до/з кошика\nexport const addToCartClick = () => {\n  if (!productId) return;\n\n  // productId оголошуємо глобально, а записуємо при відкритті модалки\n  const isInCart = isInLS(LS_KEYS.CART, productId);\n  if (isInCart) {\n    // якщо айді є в ЛС,маємо видаляти продукт з ЛС, міняти кнопку на Адд\n    refs.addToCartBtn.textContent = 'Add to Cart';\n    removeFromLS(LS_KEYS.CART, productId);\n    refs.cartCount.textContent--;\n  } else {\n    // якщо немає - додаємо продукт в ЛС, міняємо кнопку на Ремув\n    refs.addToCartBtn.textContent = 'Remove from cart';\n    addToLS(LS_KEYS.CART, productId);\n    refs.cartCount.textContent++;\n  }\n};\n// 6.2 Реалізуємо додавання/видалення товару до/з вішліста\nexport const addToWishClick = () => {\n  if (!productId) return;\n\n  // productId оголошуємо глобально, а записуємо при відкритті модалки\n  const isInWishlist = isInLS(LS_KEYS.WISHLIST, productId);\n  if (isInWishlist) {\n    // якщо айді є в ЛС,маємо видаляти продукт з ЛС, міняти кнопку на Адд\n    refs.addToWishBtn.textContent = 'Add to Wishlist';\n    removeFromLS(LS_KEYS.WISHLIST, productId);\n    refs.wishCount.textContent--;\n  } else {\n    // якщо немає - додаємо продукт в ЛС, міняємо кнопку на Ремув\n    refs.addToWishBtn.textContent = 'Remove from Wishlist';\n    addToLS(LS_KEYS.WISHLIST, productId);\n    refs.wishCount.textContent++;\n  }\n};\n\n// WISHLIST-PAGE\nexport const getProductsInWishlist = async () => {\n  const savedProducts = getSavedProducts(LS_KEYS.WISHLIST);\n  clearProductsList();\n  if (savedProducts.length === 0) {\n    refs.divNotFound.classList.add('not-found--visible');\n    return;\n  }\n  refs.divNotFound.classList.remove('not-found--visible');\n  try {\n    const data = await fetchProductsByIds(savedProducts);\n    renderProducts(data);\n  } catch (error) {\n    console.log(error);\n  }\n};\n\n// CART-PAGE\nexport const getProductsInCart = async () => {\n  const savedProducts = getSavedProducts(LS_KEYS.CART);\n  clearProductsList();\n  if (savedProducts.length === 0) {\n    refs.divNotFound.classList.add('not-found--visible');\n    countSummary([]); // щоб очистити summary одразу коли пусто\n    return;\n  }\n  refs.divNotFound.classList.remove('not-found--visible');\n  try {\n    const data = await fetchProductsByIds(savedProducts);\n    countSummary(data);\n    renderProducts(data);\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nexport const cartBuyProductsClick = () => {\n  const savedProducts = getSavedProducts(LS_KEYS.CART);\n  if (savedProducts.length === 0) {\n    showToastMessage('You have no products to buy', 'warning');\n    return;\n  }\n\n  showToastMessage('Thank you for your order!', 'success');\n  countSummary([]);\n  refs.cartCount.textContent = 0;\n  removeFromStorage(LS_KEYS.CART);\n  clearProductsList();\n  refs.divNotFound.classList.add('not-found--visible');\n};\n"],"names":["BASE_URL","ENDPOINTS","ITEMS_PER_PAGE","LS_KEYS","refs","renderCategories","data","markup","el","activeFirstBtnInCategories","renderProducts","id","thumbnail","title","brand","category","price","clearProductsList","renderProductInModal","tags","description","shippingInformation","returnPolicy","tagsInMarkup","tag","showLoadMore","hideLoadMore","countSummary","products","totalPrice","total","product","showToastMessage","message","type","options","iziToast","removeActiveBtn","activeBtn","firstBtn","checkVisibilityLoadMoreButton","currentPage","onEscKeyPress","event","closeModal","onBackdropClick","target","openModal","axios","fetchAllCategories","fetchAllProducts","page","skip","fetchProductsByCategory","fetchProductById","fetchProductsByName","name","fetchProductsByIds","ids","getFromStorage","key","error","saveToStorage","removeFromStorage","getSavedProducts","isInLS","addToLS","savedProducts","removeFromLS","updatedProductes","prodId","productId","getCategories","categories","getProducts","getProductsByCategory","getProductByID","li","isInCart","isInWishlist","getProductsBySearchName","inputValue","clearProductsBySearchForm","getProductsByLoadMore","addToCartClick","addToWishClick","getProductsInWishlist","getProductsInCart","cartBuyProductsClick"],"mappings":"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"}